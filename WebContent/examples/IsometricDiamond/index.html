<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Crafty TileMapBuilder demo: Isometric</title>
    <style>
    body, html { margin:0; padding: 0; overflow:hidden; font-family:Arial; font-size:20px }
    #cr-stage { border:2px solid black; margin:5px auto; color:white }
    </style>  
  </head>
  <body>
    
    <script src="../../libs/crafty.js"></script>
    <script src="js/source.js"></script> 
    <script src="../../tiledmapbuilder.js"></script>    
	<script>
  		window.onload = function() { 
  			var TILE_WIDTH = 64;
  			var TILE_HEIGHT = 32;
  			var WIDTH = 640;
  			var HEIGHT = 340;
  			Crafty.init(WIDTH, HEIGHT);  
  			Crafty.viewport.init(WIDTH, HEIGHT);
  			Crafty.scene("Load", function() {
				  				
  				 Crafty.load([
  				            "img/isometric_grass_and_water.png"
  				             ], function() {
  					   					   					 					   					   		
  					Crafty.scene("Main");		
  					});  				
  			});
  			
  			Crafty.scene("Load");
  			  			  		
			Crafty.scene("Main", function () {											
				Crafty.e("2D, DOM, TiledMapBuilder").createWorld( SOURCE_FROM_TILED_MAP_EDITOR );												
				Crafty.e("2D, DOM, Color, Keyboard").color("red").attr({x:0, y:HEIGHT/2, w:5, h:5})			
				.bind("EnterFrame", function (direction) {
					 if (this.isDown('LEFT_ARROW')) {
				        	Crafty.viewport.x+=1;
				        	this.x -=1;
				            
				        } else if (this.isDown('RIGHT_ARROW')) {
				        	Crafty.viewport.x-=1;
				        	this.x +=1;
				            
				        } else if (this.isDown('UP_ARROW')) {
				        	Crafty.viewport.y+=1;
				        	this.y -=1;
				            
				        } else if (this.isDown('DOWN_ARROW')) {
				        	Crafty.viewport.y-=1;
				        	this.y +=1;
				        }		       
					})  		
				
				Crafty.viewport.x = WIDTH/2 - TILE_WIDTH/2;	
				
				//TODO
  			});  			  													
  	}	
	</script>	
	<p align="center">Use arrows for moving player.</p>
  </body>
</html>
